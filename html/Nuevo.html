<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Artículo</title>
    <script>
        async function fetchArticle() {
            const owner = document.getElementById("owner").value;
            const title = document.getElementById("title").value;

            if (!owner || !title) {
                alert("Por favor, ingrese el propietario y el título del artículo.");
                return;
            }

            // Llamar al CGI usando fetch
            const response = await fetch(`/cgi-bin/article.pl?owner=${owner}&title=${title}`);
            const xmlText = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlText, "text/xml");

            // Mostrar los resultados en la página
            const articleOwner = xmlDoc.querySelector("owner").textContent;
            const articleTitle = xmlDoc.querySelector("title").textContent;
            const articleText = xmlDoc.querySelector("text").textContent;

            const resultDiv = document.getElementById("result");
            if (articleOwner && articleTitle && articleText) {
                resultDiv.innerHTML = `
                    <h2>${articleTitle}</h2>
                    <p><strong>Propietario:</strong> ${articleOwner}</p>
                    <p>${articleText}</p>
                `;
            } else {
                resultDiv.innerHTML = "<p>No se encontró el artículo.</p>";
            }
        }
    </script>
</head>
<body>
    <h1>Consulta de Artículo</h1>
    <form onsubmit="event.preventDefault(); fetchArticle();">
        <label for="owner">Propietario:</label>
        <input type="text" id="owner" name="owner" required>
        <br><br>
        <label for="title">Título:</label>
        <input type="text" id="title" name="title" required>
        <br><br>
        <button type="submit">Consultar</button>
    </form>
    <hr>
    <div id="result">
        <!-- Aquí se mostrarán los resultados -->
    </div>
</body>
</html>
